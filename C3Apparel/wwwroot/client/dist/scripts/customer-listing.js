(()=>{"use strict";var e=new Object;function t(){const{createApp:e}=Vue;let t=this;this.el=document.getElementById("listingMain"),this.selectedBrandID=0,this.itemsPerPage=Number(this.el.getAttribute("data-item-per-page")),""!=document.getElementById("selectBrand").value&&(this.selectedBrandID=Number(document.getElementById("selectBrand").value));const i=t.el.getAttribute("data-endpoint"),n=t.el.getAttribute("data-method");e({data:()=>({grid:{pagination:{currentPage:1,totalPage:0,rowPerPage:20},rows:[]}}),mounted(){t.selectedBrandID>0&&this.populateGrid(1)},methods:{populateGrid(e){let a={brandID:t.selectedBrandID,pageNumber:e,itemsPerPage:t.itemsPerPage},r=this.grid;fetch(i,{method:n,headers:{"Content-Type":"application/json"},body:"GET"==n?null:JSON.stringify(a),data:"GET"!=n?null:JSON.stringify(a)}).then((e=>e.json())).then((function(e){r.pagination.totalPage=e.totalPage,void 0!==e.pricings&&(r.rows=[],e.pricings.forEach((e=>{r.rows.push(e)})))}))},gotoPage(e){this.grid.pagination.currentPage=Number(e.srcElement.value),this.populateGrid(this.grid.pagination.currentPage)},gotoPreviousPage(e){e.preventDefault(),this.grid.pagination.currentPage>1&&(this.grid.pagination.currentPage--,this.populateGrid(this.grid.pagination.currentPage))},gotoNextPage(e){e.preventDefault(),this.grid.pagination.currentPage<this.grid.pagination.totalPage&&(this.grid.pagination.currentPage++,this.populateGrid(this.grid.pagination.currentPage))}}}).mount("#listingMain")}document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("click",(function(e){if("buttonSearch"!=e.target.id)return;e.preventDefault();let t=document.querySelector(".filter-container");t.classList.remove("show-error");var i=document.getElementById("selectBrand");if(""==i.value)return t.classList.add("show-error"),void(t.querySelector(".error").textContent="Please select a brand");location="?brandid="+i.value}),!1),e.PriceListing=new t}))})();